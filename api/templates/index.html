{% extends "base.html" %}

{% block title %}Início - Convite de Noivado{% endblock %}

{% block content %}
<!-- Ícone da área administrativa no canto superior direito -->
<div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
    <a href="{{ url_for('admin') }}" title="Área Administrativa" style="background: linear-gradient(135deg, #6b7a5a, #7d8766); color: white; border: none; padding: 12px; border-radius: 50%; text-decoration: none; display: inline-block; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1); width: 45px; height: 45px; text-align: center; line-height: 20px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 10px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 5px rgba(0,0,0,0.1)'">
        <i class="fas fa-sign-in-alt" style="font-size: 1.2rem;"></i>
    </a>
</div>

<div class="card">
    <div style="text-align: center; margin-bottom: 30px;">
        <h2 style="color: #7d8766;">
            <i class="fas fa-heart"></i> Bem-vindo ao nosso noivado!
        </h2>
        <p style="color: #666;">Igor & Júlia</p>
    </div>

    <!-- Seção Como Funciona no lugar da logo -->
    <div class="card">
        <h3 style="color: #7d8766; margin-bottom: 20px; text-align: center;">
            <i class="fas fa-info-circle"></i> Como Funciona
        </h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                <i class="fas fa-check-circle" style="font-size: 2rem; color: #7d8766; margin-bottom: 10px;"></i>
                <h4>1. Confirmar</h4>
                <p>Preencha seus dados e confirme presença</p>
                <div style="margin-top: 15px;">
                    <a href="#formulario-confirmacao" style="margin: 5px; padding: 10px 20px; font-size: 0.95rem; border-radius: 25px; text-decoration: none; display: inline-block; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1); background: linear-gradient(135deg, #7d8766, #8a9575); color: white; border: none;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 10px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 5px rgba(0,0,0,0.1)'">
                        <i class="fas fa-check"></i> Confirmar
                    </a>
                </div>
            </div>
            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                <i class="fas fa-gift" style="font-size: 2rem; color: #7d8766; margin-bottom: 10px;"></i>
                <h4>2. Lista de Presentes</h4>
                <p>Confira nossa lista de presentes</p>
                <div style="margin-top: 15px;">
                    <a href="https://www.camicado.com.br/lista/convidado/igoremariajulia" target="_blank" style="margin: 5px; padding: 10px 20px; font-size: 0.95rem; border-radius: 25px; text-decoration: none; display: inline-block; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1); background: linear-gradient(135deg, #7d8766, #8a9575); color: white; border: none;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 10px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 5px rgba(0,0,0,0.1)'">
                        <i class="fas fa-gift"></i> Ver Lista de Presentes
                    </a>
                </div>
            </div>
            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                <i class="fas fa-map-marker-alt" style="font-size: 2rem; color: #7d8766; margin-bottom: 10px;"></i>
                <h4>3. Endereço abaixo:</h4>
                <p>Av. Ayrton Senna, 3391<br>Condomínio Vita Praia</p>
                <div style="margin-top: 15px;">
                    <a href="https://waze.com/ul?q=Av.%20Ayrton%20Senna,%203391,%20Condomínio%20Vita%20Praia" target="_blank" style="margin: 5px; padding: 10px 20px; font-size: 0.95rem; border-radius: 25px; text-decoration: none; display: inline-block; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1); background: linear-gradient(135deg, #7d8766, #8a9575); color: white; border: none;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 10px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 5px rgba(0,0,0,0.1)'">
                        <i class="fas fa-compass"></i> Waze
                    </a>
                    <a href="https://maps.google.com/?q=Av.+Ayrton+Senna,+3391,+Condomínio+Vita+Praia" target="_blank" style="margin: 5px; padding: 10px 20px; font-size: 0.95rem; border-radius: 25px; text-decoration: none; display: inline-block; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1); background: linear-gradient(135deg, #6b7a5a, #7d8766); color: white; border: none;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 10px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 5px rgba(0,0,0,0.1)'">
                        <i class="fas fa-map"></i> Google Maps
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Logo desceu para onde estava o Como Funciona -->
    <div class="card logo-container">
        <div class="logo-placeholder" style="text-align: center;">
            <img src="{{ url_for('static', filename='images/logo-noivado1.png') }}" alt="Logo Igor & Júlia" style="max-width: 100%; height: auto; max-height: 300px;">
            <p style="margin-top: 20px; font-style: italic; color: #555; max-width: 80%; margin-left: auto; margin-right: auto; line-height: 1.6;">
                "Cantarei para sempre as misericórdias do Senhor; com a minha boca farei conhecida a tua fidelidade por todas as gerações.<br>Salmos 89:1"
            </p>
        </div>
    </div>

    <!-- Formulário de confirmação com ID para âncora -->
    <div class="card" id="formulario-confirmacao">
        <h3 style="color: #7d8766; margin-bottom: 20px; text-align: center;">
            <i class="fas fa-user-plus"></i> Confirmar Presença
        </h3>
        
        <form method="POST" action="{{ url_for('confirmar') }}" style="max-width: 600px; margin: 0 auto;">
            <div id="convidados-container">
                <div class="form-group">
                    <label for="nome1">
                        <i class="fas fa-user"></i> Nome Completo *
                    </label>
                    <input type="text" id="nome1" name="nome1" class="form-control" required>
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <button type="button" id="adicionar-convidado" onclick="adicionarConvidado()" style="background: linear-gradient(135deg, #8a9575, #9ba686); color: white; border: none; padding: 10px 20px; border-radius: 25px; margin: 5px; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 10px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 5px rgba(0,0,0,0.1)'">
                    <i class="fas fa-plus"></i> Adicionar Nome
                </button>
                <button type="submit" style="background: linear-gradient(135deg, #7d8766, #8a9575); color: white; border: none; padding: 10px 20px; border-radius: 25px; margin: 5px; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 10px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 5px rgba(0,0,0,0.1)'">
                    <i class="fas fa-check"></i> Confirmar Presença
                </button>
            </div>
        </form>

        <script>
            let convidadosCount = 1;
            const maxConvidados = 3;

            function adicionarConvidado() {
                if (convidadosCount < maxConvidados) {
                    convidadosCount++;
                    const container = document.getElementById('convidados-container');
                    
                    const novoConvidado = document.createElement('div');
                    novoConvidado.className = 'form-group';
                    novoConvidado.innerHTML = `
                        <label for="nome${convidadosCount}">
                            <i class="fas fa-user"></i> Nome ${convidadosCount}
                        </label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="text" id="nome${convidadosCount}" name="nome${convidadosCount}" class="form-control">
                            <button type="button" style="background: linear-gradient(135deg, #dc3545, #e74c3c); color: white; border: none; padding: 8px 12px; font-size: 0.9rem; border-radius: 15px; transition: all 0.3s ease;" onclick="removerConvidado(this)" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    
                    container.appendChild(novoConvidado);
                    
                    if (convidadosCount >= maxConvidados) {
                        document.getElementById('adicionar-convidado').style.display = 'none';
                    }
                }
            }

            function removerConvidado(button) {
                const formGroup = button.closest('.form-group');
                formGroup.remove();
                convidadosCount--;
                
                // Reorganizar os IDs dos campos restantes
                const campos = document.querySelectorAll('#convidados-container .form-group input');
                campos.forEach((campo, index) => {
                    const novoId = index + 1;
                    campo.id = `nome${novoId}`;
                    campo.name = `nome${novoId}`;
                    campo.previousElementSibling.querySelector('label').textContent = `Nome ${novoId}`;
                });
                
                // Mostrar o botão de adicionar novamente se necessário
                if (convidadosCount < maxConvidados) {
                    document.getElementById('adicionar-convidado').style.display = 'inline-block';
                }
            }

            // Função para mostrar o modal de parabéns
            function mostrarModalParabens() {
                const modal = document.getElementById('modal-parabens');
                if (modal) {
                    modal.style.display = 'flex';
                }
            }

            // Função para fechar o modal
            function fecharModal() {
                const modal = document.getElementById('modal-parabens');
                if (modal) {
                    modal.style.display = 'none';
                }
            }

            // Fechar modal ao clicar fora dele
            window.onclick = function(event) {
                const modal = document.getElementById('modal-parabens');
                if (event.target === modal) {
                    fecharModal();
                }
            }

            // Verificar se há mensagem de sucesso na URL (após confirmação)
            window.onload = function() {
                const urlParams = new URLSearchParams(window.location.search);
                if (urlParams.get('success') === 'true') {
                    setTimeout(function() {
                        mostrarModalParabens();
                    }, 500);
                }
            };
        </script>

        <!-- Modal de Parabéns - ÚNICO -->
        <div id="modal-parabens" style="display: none; position: fixed; z-index: 999999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); justify-content: center; align-items: center; padding: 20px;">
            <div style="background: white; padding: 40px; border-radius: 20px; text-align: center; max-width: 450px; width: 100%; box-shadow: 0 20px 60px rgba(0,0,0,0.3); position: relative;">
                <div style="font-size: 4rem; color: #7d8766; margin-bottom: 20px;">
                    🎉
                </div>
                <h2 style="color: #7d8766; margin-bottom: 20px; font-size: 2.2rem; font-weight: bold;">
                    Parabéns!
                </h2>
                <p style="color: #666; margin-bottom: 30px; font-size: 1.1rem; line-height: 1.6;">
                    Você confirmou sua presença no nosso noivado!<br>
                    Estamos muito felizes em ter você conosco neste momento especial.
                </p>
                <div style="margin-bottom: 30px;">
                    <a href="https://www.camicado.com.br/lista/convidado/igoremariajulia" target="_blank" style="background: linear-gradient(135deg, #7d8766, #8a9575); color: white; border: none; padding: 15px 30px; border-radius: 25px; text-decoration: none; display: inline-block; font-size: 1rem; font-weight: 500; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <i class="fas fa-gift"></i> Ver Lista de Presentes
                    </a>
                </div>
                <button onclick="fecharModal()" style="background: linear-gradient(135deg, #6c757d, #495057); color: white; border: none; padding: 12px 25px; border-radius: 20px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                    Fechar
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %} 